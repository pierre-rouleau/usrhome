#!/bin/sh
# SH FILE: iconv-iso8859-utf8-all
#
# Purpose   : Convert all specified files in a directory tree from ISO-8859 to UTF-8.
# Created   : Monday, September  8 2025.
# Author    : Pierre Rouleau <prouleau001@gmail.com>
# Time-stamp: <2025-09-08 22:51:46 EDT, updated by Pierre Rouleau>

# ----------------------------------------------------------------------------
# Module Description
# ------------------
#
# Convert all text files that are ISO-8859 or invalid ISO to UTF-8.
# It assumes Non-ISO are ISO-8859 with mistakes, and it seems that the
# translation fixes the issues seen by tohtml.

# ----------------------------------------------------------------------------
# Dependencies
# ------------
#
# fd
# xargs, grep, cut

# ----------------------------------------------------------------------------
# Code
# ----
#
#
fd "$1" | xargs -I $ file $ | grep Non-ISO  | cut -f1 -d":" | xargs -I $ iconv-iso8859-utf8 $
fd "$1" | xargs -I $ file $ | grep ISO-8859 | cut -f1 -d":" | xargs -I $ iconv-iso8859-utf8 $

# ----------------------------------------------------------------------------
